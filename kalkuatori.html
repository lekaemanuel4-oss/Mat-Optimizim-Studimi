<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimizuesi i Kohës së Studimit</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #00d2ff;
            --secondary: #3fef7d;
            --bg-dark: #0a0e12;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at top, #1a2a3a 0%, var(--bg-dark) 100%);
            margin: 0; padding: 20px; color: #eee;
            display: flex; justify-content: center;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px; 
            width: 100%;
            margin: 20px auto; 
            padding: 50px 40px; 
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 40px; 
            box-shadow: 0 40px 100px rgba(0,0,0,0.6);
        }

        h1 {
            text-align: center; 
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            margin-bottom: 40px;
            background: linear-gradient(to bottom, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text; color: transparent;
        }

        .intro {
            background: rgba(0, 210, 255, 0.07);
            padding: 30px; 
            border-radius: 25px; 
            margin-bottom: 50px; 
            line-height: 1.8; 
            border: 1px solid rgba(0, 210, 255, 0.15);
            color: #bceaff;
        }

     
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        label { font-weight: 600; font-size: 0.9rem; color: var(--primary); letter-spacing: 0.5px; }

        input[type=number], input[type=text] {
            padding: 15px; 
            border-radius: 15px; 
            border: 1px solid var(--glass-border); 
            background: rgba(0, 0, 0, 0.4);
            color: #fff;
            font-size: 1rem; 
            transition: all 0.3s ease;
        }

        input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.2);
            outline: none;
        }

      
        .subject {
            background: rgba(255, 255, 255, 0.02); 
            padding: 35px; 
            border-radius: 30px; 
            margin-bottom: 30px; 
            border: 1px solid var(--glass-border);
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .subject b { grid-column: span 2; font-size: 1.2rem; color: #fff; border-bottom: 1px solid var(--glass-border); padding-bottom: 10px; margin-bottom: 10px; }

        .subject .input-group-half { display: flex; flex-direction: column; gap: 8px; }

        button {
            padding: 18px 40px; 
            border: none; 
            border-radius: 20px;
            font-weight: 700; 
            text-transform: uppercase;
            cursor: pointer; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: block;
            margin: 20px auto;
        }

        .btn-generate { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid var(--glass-border); }
        .btn-calculate { background: linear-gradient(135deg, var(--secondary), #27ae60); color: #000; width: 100%; margin-top: 50px; }

        button:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.3); }

        h2.section-title {
            margin-top: 80px; 
            font-size: 1.6rem; 
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        
        .chart-container {
            margin: 40px 0;
            padding: 30px;
            background: rgba(0,0,0,0.2);
            border-radius: 25px;
            border: 1px solid var(--glass-border);
        }

        .bar {
            height: 45px; margin: 15px 0; color: #000; 
            display: flex; align-items: center; justify-content: flex-end;
            padding-right: 20px; border-radius: 12px; 
            font-weight: 700; font-size: 0.9rem; 
        }

        .summary-text {
            background: rgba(63, 239, 125, 0.05);
            padding: 30px;
            border-radius: 25px;
            border: 1px dashed var(--secondary);
            margin-top: 50px;
            line-height: 2;
            color: var(--secondary);
        }

        .nav {
            margin-top: 60px; display: flex; justify-content: center; gap: 20px;
        }

        .nav a {
            padding: 12px 25px; border-radius: 15px; background: var(--glass);
            text-decoration: none; color: #888; border: 1px solid var(--glass-border);
            transition: 0.3s;
        }

        .nav a:hover { color: #fff; border-color: #fff; }

       
        .field-error { color: #ff6b6b; font-size: 0.75rem; min-height: 18px; margin-top: 4px; }

        @media(max-width:768px){
            .subject { grid-template-columns: 1fr; }
            .subject b { grid-column: span 1; }
        }



        :root {
            --primary: #00d2ff;
            --secondary: #3fef7d;
            --bg-body: radial-gradient(circle at top, #1a2a3a 0%, #0a0e12 100%);
            --container-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-color: #eee;
            --card-bg: rgba(255, 255, 255, 0.03);
            --nav-bg: rgba(10, 14, 18, 0.8);
            --formula-text: #38bdf8;
        }

        [data-theme="light"] {
            --bg-body: radial-gradient(circle at top, #e0f2fe 0%, #f8fafc 100%);
            --container-bg: #ffffff;
            --glass-border: #cbd5e1;
            --text-color: #1e293b;
            --card-bg: #f8fafc;
            --nav-bg: rgba(255, 255, 255, 0.9);
            --formula-text: #0077b6;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-body);
            margin: 0; padding: 20px; color: var(--text-color);
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        .theme-toggle {
            position: fixed; top: 20px; right: 20px; z-index: 1001;
            background: var(--primary); color: white; border: none;
            padding: 12px; border-radius: 50%; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .footer {
            text-align: center; margin-top: 40px; font-size: 0.9rem; opacity: 0.7;
        }
    </style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">
    <i class="fa-solid fa-sun"></i>
</button>

<div class="container">
    <h1><i class="fa-solid fa-clock"></i> Optimizuesi</h1>

    <div class="intro">
        Ky kalkulator ndihmon të planifikoni kohën optimale për çdo lëndë bazuar në prioritet, vështirësi dhe përgatitje.
    <ul>
     <li>1️⃣ Vendosni totalin e orëve të studimit.
<li>2️⃣ Zgjidhni numrin e lëndëve.
<li>3️⃣ Shkruani emrin, prioritetin, vështirësinë dhe përgatitjen për secilën lëndë.
<li>4️⃣ Klikoni "Llogarit Kohën Optimale" dhe shikoni rezultatet.
    </ul>
    </div>

    <div class="config-grid">
        <div class="input-group">
            <label>Koha totale (orë):</label>
            <input type="number" id="totalTime" value="6" step="0.1">
            <div id="totalTimeError" class="field-error"></div>
        </div>
        <div class="input-group">
            <label>Numri i lëndëve:</label>
            <input type="number" id="numSubjects" value="3" min="1">
            <div id="numSubjectsError" class="field-error"></div>
        </div>
    </div>

    <button class="btn-generate" onclick="generateSubjects()">
        <i class="fa-solid fa-layer-group"></i> Gjenero Fushat e Lëndëve
    </button>
    
    <div id="subjectsContainer" style="margin-top: 40px;"></div>
    
    <button class="btn-calculate" onclick="calculateTime()">
        <i class="fa-solid fa-bolt"></i> Gjej Balancën Optimale
    </button>

    <h2 class="section-title"><i class="fa-solid fa-chart-bar"></i> Shpërndarja Vizuale</h2>
    <div id="oldGraph" class="chart-container"></div>

    <h2 class="section-title"><i class="fa-solid fa-gauge-high"></i> Analiza Krahasimore</h2>
    <div class="chart-container">
        <canvas id="newChartCanvas"></canvas>
    </div>

    <div id="summaryText" class="summary-text"></div>

    <div class="nav">
        <a href="index.html">Kryesore</a>
        <a href="formulat.html">Formulat</a>
        <a href="Efikasitet.html">Mat Efikasitetin</a>
    </div>

    <div class="footer">
        Model Matematik për Optimizimin e Ngarkesës Mendore © Optimizuesi Inteligjent i Studimit<br>
        @leka_emanuel4
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
   
    function generateSubjects(){
        let n=parseInt(document.getElementById('numSubjects').value);
        if(n<1){ n=1; document.getElementById('numSubjects').value=1; }
        const container=document.getElementById('subjectsContainer');
        container.innerHTML='';
        for(let i=1;i<=n;i++){
            const div=document.createElement('div'); div.className='subject';
            div.innerHTML=`<b>Lënda ${i}</b>
            <div class="input-group-half"><label>Emri:</label><input type='text' class='subjectName'><div class='field-error name-error'></div></div>
            <div class="input-group-half"><label>Prioriteti (1-5):</label><input type='number' min='1' max='5' step='0.1' class='priority'><div class='field-error priority-error'></div></div>
            <div class="input-group-half"><label>Vështirësia (1-5):</label><input type='number' min='1' max='5' step='0.1' class='difficulty'><div class='field-error difficulty-error'></div></div>
            <div class="input-group-half"><label>Përgatitja (1-5):</label><input type='number' min='1' max='5' step='0.1' class='preparedness'><div class='field-error preparedness-error'></div></div>`;
            container.appendChild(div);
        }
    }
    generateSubjects();

    let newChart=null;
    function calculateTime(){
        const T=parseFloat(document.getElementById('totalTime').value);
        const namesEls=Array.from(document.getElementsByClassName('subjectName'));
        const prioritiesEls=Array.from(document.getElementsByClassName('priority'));
        const difficultiesEls=Array.from(document.getElementsByClassName('difficulty'));
        const preparednessEls=Array.from(document.getElementsByClassName('preparedness'));
        
        document.getElementById('totalTimeError').textContent='';
        namesEls.forEach(el=>{
            const row=el.closest('.input-group-half') || el.parentElement;
            row.parentElement.querySelectorAll('.field-error').forEach(fe=>fe.textContent='');
            row.parentElement.querySelectorAll('input').forEach(inp=>inp.classList.remove('input-error'));
        });

        let hasError=false;
        if(isNaN(T)||T<=0){document.getElementById('totalTimeError').textContent='Vendosni një kohë valide.'; hasError=true;}
        for(let i=0;i<namesEls.length;i++){
            const parent = namesEls[i].parentElement;
            if(!namesEls[i].value.trim()){parent.querySelector('.name-error').textContent='Mungon emri.'; hasError=true;}
            if(isNaN(parseFloat(prioritiesEls[i].value))){prioritiesEls[i].parentElement.querySelector('.priority-error').textContent='1-5.'; hasError=true;}
          
        }
        
        if(hasError) return;

        const names=namesEls.map(el=>el.value.trim());
        const priorities=prioritiesEls.map(i=>parseFloat(i.value));
        const difficulties=difficultiesEls.map(i=>parseFloat(i.value));
        const preparedness=preparednessEls.map(i=>parseFloat(i.value));
        
        let N=priorities.map((p,idx)=>(p*difficulties[idx])/preparedness[idx]);
        const Ntotal=N.reduce((a,b)=>a+b,0);
        let t=N.map(n=>T*n/Ntotal);

        const colors=['#00d2ff','#3fef7d','#a29bfe','#ff9ff3','#feca57','#ff6b6b'];

        const oldGraph=document.getElementById('oldGraph'); oldGraph.innerHTML='';
        t.forEach((ti,idx)=>{
            const bar=document.createElement('div'); bar.className='bar';
            bar.style.width=(ti/T*100)+'%';
            bar.style.backgroundColor=colors[idx % colors.length];
            bar.textContent=`${names[idx]}: ${ti.toFixed(2)}h`;
            oldGraph.appendChild(bar);
        });

        const ctx=document.getElementById('newChartCanvas').getContext('2d');
        if(newChart) newChart.destroy();
        newChart=new Chart(ctx,{
            type:'bar',
            data:{labels:names, datasets:[{label:'Orët', data:t, backgroundColor:colors, borderRadius:10}]},
            options:{
                responsive:true,
                scales:{ y:{beginAtZero:true, grid:{color:'rgba(255,255,255,0.05)'}, ticks:{color:'#888'}}, x:{ticks:{color:'#888'}, grid:{display:false}}}
            }
        });

        const summary = document.getElementById('summaryText');
        let text = `✅ Orët e Optimizuara:\n`;
        t.forEach((ti, idx)=>{
            const h = Math.floor(ti); const m = Math.round((ti-h)*60);
            text += `• ${names[idx]}: ${h}h ${m}m\n`;
        });
        summary.innerText = text;
    }



     function toggleTheme() {
        const body = document.body;
        const themeIcon = document.getElementById('theme-icon');
        if (body.getAttribute('data-theme') === 'dark') {
            body.setAttribute('data-theme', 'light');
            themeIcon.classList.remove('fa-sun');
            themeIcon.classList.add('fa-moon');
        } else {
            body.setAttribute('data-theme', 'dark');
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }
    }
</script>
</body>
</html>
